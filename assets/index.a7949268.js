(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();const $=document.querySelector("#sorting-btn"),M=document.querySelector("#categories-btn"),q=document.querySelector("#add-btn"),r=document.querySelector(".sort-container"),l=document.querySelector(".categories-container"),a=document.querySelector(".add-item-container"),y=document.querySelector("#title-input"),g=document.querySelector("#category-input"),p=document.querySelector("#date-input"),u=document.querySelector("#add-item-btn");let w=!1,I=!1,b=!1;const F=document.querySelector("#sort-name-btn"),R=document.querySelector("#sort-deadline-btn"),Y=document.querySelector("#sort-date-added-btn");let c="deadline",S="all categories",d=[],m=[];const O=document.querySelector("#todo-items-container");function E(t){const i=t.currentTarget.id;i==="sorting-btn"?(r.style.visibility==="visible"?r.style.visibility="hidden":r.style.visibility="visible",r==null||r.classList.toggle("open"),a==null||a.classList.remove("open"),l==null||l.classList.remove("open"),a.style.visibility="hidden",l.style.visibility="hidden"):i==="add-btn"?(a.style.visibility==="visible"?a.style.visibility="hidden":a.style.visibility="visible",a==null||a.classList.toggle("open"),r==null||r.classList.remove("open"),l==null||l.classList.remove("open"),r.style.visibility="hidden",l.style.visibility="hidden"):i==="categories-btn"&&(l.style.visibility==="visible"?l.style.visibility="hidden":l.style.visibility="visible",l==null||l.classList.toggle("open"),r==null||r.classList.remove("open"),a==null||a.classList.remove("open"),a.style.visibility="hidden",r.style.visibility="hidden")}function H(t){const e=t.currentTarget,i=e.value,n=e.parentElement.querySelector(".input-error");if(e.id==="date-input"){const o=new Date,f=o.getFullYear(),D=o.getMonth()+1,k=o.getDate(),h=i.split("-"),v=Number(h[0]),T=Number(h[1]),A=Number(h[2]);v>f&&v.toString().length===4||v===f&&T>D||v===f&&T===D&&A>=k?(b=!0,n.innerHTML=""):i?(b=!1,n.innerHTML="cannot be in the Past"):(b=!1,n.innerHTML="is Required")}e.id==="title-input"&&(i?(w=!0,n.innerHTML=""):(w=!1,n.innerHTML="is Required")),e.id==="category-input"&&(i?(I=!0,n.innerHTML=""):(I=!1,n.innerHTML="is Required")),w&&I&&b?u==null||u.removeAttribute("disabled"):u==null||u.setAttribute("disabled","true")}function N(t){const i=t.currentTarget.id;i==="sort-name-btn"&&(c==="name"?c="nameReversed":c="name"),i==="sort-deadline-btn"&&(c==="deadline"?c="deadlineReversed":c="deadline"),i==="sort-date-added-btn"&&(c==="dateAdded"?c="dateAddedReversed":c="dateAdded"),L(),r==null||r.classList.remove("open"),r.style.visibility="hidden"}function C(){c==="name"&&d.sort((t,e)=>t.title.toLowerCase()>e.title.toLowerCase()?1:-1),c==="nameReversed"&&d.sort((t,e)=>e.title.toLowerCase()>t.title.toLowerCase()?1:-1),c==="deadline"&&d.sort((t,e)=>{const i=new Date(t.deadline),s=new Date(e.deadline);return i.valueOf()-s.valueOf()}),c==="deadlineReversed"&&d.sort((t,e)=>{const i=new Date(t.deadline);return new Date(e.deadline).valueOf()-i.valueOf()}),c==="dateAdded"&&d.sort((t,e)=>{const i=new Date(t.dateAddedToList),s=new Date(e.dateAddedToList);return i.valueOf()-s.valueOf()}),c==="dateAddedReversed"&&d.sort((t,e)=>{const i=new Date(t.dateAddedToList);return new Date(e.dateAddedToList).valueOf()-i.valueOf()})}function _(t){const e=[];if(t.deadline&&t.dateAddedToList){const i=new Date(t.deadline),s=new Date(t.dateAddedToList),n=i.getTime(),o=new Date().getTime(),f=n-o,D=Math.ceil(f/(1e3*60*60*24));e.push(String(D));const k=`0${i.getMonth()+1}`.slice(-2),h=`0${i.getDate()}`.slice(-2),v=`${i.getFullYear()}-${k}-${h}`;e.push(v);const T=`0${s.getMonth()+1}`.slice(-2),A=`0${i.getDate()}`.slice(-2),B=`${s.getFullYear()}-${T}-${A}`;e.push(B)}return e}function V(t){const e=Number(t);return e<=5&&e>0?" close-deadline":e<=0?" after-deadline":""}function x(t){const e=Number(t);return e===1||e===-1?`${e} day`:`${e} days`}function P(){const t=[],e=l.querySelector("ul"),i=document.querySelector("#browse");e.innerHTML='<li>> <button class="category-btn">all categories</button> <</li>',i.innerHTML=`
  <option value="Important">
  <option value="Home">
  <option value="Work">
  `;for(let n=0;n<d.length;n++){const o=d[n];t.push(o.category)}t.filter(n=>!!n).sort((n,o)=>n>o?1:-1);const s=[...new Set(t)];for(let n=0;n<s.length;n++){const o=s[n];e.innerHTML+=`<li>> <button class="category-btn">${o}</button> <</li>`,i.innerHTML+=`<option value="${o}">`}}function J(t){S=t.currentTarget.innerText,L(),l==null||l.classList.remove("open"),l.style.visibility="hidden"}function W(){const t=document.querySelector("#category-title");if(S==="all categories"){m=d,t.innerHTML="all categories";return}m=d.filter(e=>e.category===S),t.innerHTML=S}function K(t){return t.category==="Important"?'<span class="material-symbols-outlined">star</span>':t.category==="Home"?'<span class="material-symbols-outlined">cottage</span>':t.category==="Work"?'<span class="material-symbols-outlined">apartment</span>':""}function j(){for(let t=0;t<m.length;t++){const e=m.findIndex(i=>i.isChecked===!0);m.push(m.splice(e,1)[0])}}function L(){O.innerHTML="",C(),W(),j();for(let t=0;t<m.length;t++){const e=m[t],i=U(e),s=_(e),n=V(s[0]),o=x(s[0]),f=K(e);e.title!==void 0&&e.category!==void 0&&(O.innerHTML+=`
      <article id="${t}" class="todo-item${i}${n}">

        <button>
          <span id="${t}" class="material-symbols-outlined check-item-btn">task_alt</span>
        </button>

        <p>${f}${e.title}</p>

        <p class="deadline-date">Deadline: ${s[1]}</p>
        <p class="item-category">Category: ${e.category}</p>
        <p class="date-added-date">Date added: ${s[2]}</p>

        <div class="time-left">
          <span class="material-symbols-outlined">hourglass_empty</span>
          <span>${o}</span>
        </div>

        <button>
          <span id="${t}" class="material-symbols-outlined remove-item-btn">do_not_disturb_on</span>
        </button>
      
      </article>
      `)}P(),X(),ne()}function z(t){const e=t.currentTarget,i=document.querySelector(".todo-item.open");if(i!==null){if(e.id===i.id){e.classList.toggle("open");return}i.classList.remove("open"),e.classList.add("open")}e.classList.add("open")}function G(t){const e=t.currentTarget,i=Number(e.id);d.splice(i,1),L()}function Q(t){const e=t.currentTarget,i=Number(e.id),s=m[i];s.isChecked?s.isChecked=!1:s.isChecked=!0,L()}function U(t){return t.isChecked?" checked":""}function X(){const t=document.querySelectorAll(".todo-item"),e=document.querySelectorAll(".remove-item-btn"),i=document.querySelectorAll(".check-item-btn"),s=document.querySelectorAll(".category-btn");for(let n=0;n<t.length;n++)t[n].addEventListener("click",z);for(let n=0;n<e.length;n++)e[n].addEventListener("click",G);for(let n=0;n<i.length;n++)i[n].addEventListener("click",Q);for(let n=0;n<s.length;n++)s[n].addEventListener("click",J)}function Z(){a==null||a.classList.remove("open"),u==null||u.setAttribute("disabled","true"),y.value="",g.value="",p.value="",a.style.visibility="hidden"}function ee(){const t=y==null?void 0:y.value,e=g==null?void 0:g.value,i=new Date(p.value),s=new Date,n={title:t,category:e,deadline:i,dateAddedToList:s,isChecked:!1};d.push(n),Z(),L()}function te(){const t=new Date,e=t.getFullYear(),i=`0${t.getMonth()+1}`.slice(-2),s=`0${t.getDate()}`.slice(-2);p.setAttribute("min",`${e}-${i}-${s}`)}function ne(){localStorage.setItem("data",JSON.stringify(d))}function ie(){d=JSON.parse(localStorage.getItem("data")||"{}")}$==null||$.addEventListener("click",E);M==null||M.addEventListener("click",E);q==null||q.addEventListener("click",E);y==null||y.addEventListener("blur",H);g==null||g.addEventListener("blur",H);p==null||p.addEventListener("change",H);u==null||u.addEventListener("click",ee);F.addEventListener("click",N);R.addEventListener("click",N);Y.addEventListener("click",N);ie();te();L();
